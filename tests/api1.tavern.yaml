---
test_name: Add user

stages:
  - name: Add a user
    request:
      url: http://localhost:80/api/v1/users
      method: PUT
      json:
        username: "test1"
        password: "1234567890123456789012345678901234567890"
    response:
      status_code: 201

  - name: User exists
    request:
      url: http://localhost:80/api/v1/users
      method: PUT
      json:
        username: "test1"
        password: "1234567890123456789012345678901234567890"
    response:
      status_code: 400

  - name: User doesn't exist, password is invalid
    request:
      url: http://localhost:80/api/v1/users
      method: PUT
      json:
        username: "test2"
        password: "1234567890"
    response:
      status_code: 400

  - name: Wrong method
    request:
      url: http://localhost:80/api/v1/users
      method: POST
      json:
        username: "test2"
        password: "1234567890123456789012345678901234567890"
    response:
      status_code: 405
